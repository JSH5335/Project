<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>お知らせ | Jo's Developer Blog</title>

    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/notice.css">
</head>
<body th:classappend="${session.darkMode} ? ' dark' : ''">

<div class="notice-container">

    <!-- ヘッダー -->
    <div class="notice-header">
        <h1 class="notice-title">
            <span class="notice-icon">📢</span>
            お知らせ
        </h1>

        <a href="/" class="notice-back-btn">← メインへ</a>
    </div>

    <!-- 検索 -->
    <form class="notice-search" th:action="@{/notice/list}" method="get">
        <input type="text"
               name="keyword"
               placeholder="お知らせを検索してください"
               th:value="${keyword}">
        <button type="submit">検索</button>
    </form>

    <!-- お知らせ一覧 -->
    <ul class="notice-list" th:if="${!#lists.isEmpty(noticeList)}">

        <li class="notice-item"
            th:each="notice : ${noticeList}">

            <!-- ✅ 画像がある場合のみサムネイル表示 -->
            <div class="notice-thumb"
                 th:if="${notice.imagePath != null and notice.imagePath != ''}">
                <img th:src="${notice.imagePath}" alt="お知らせ画像">
            </div>

            <!-- テキスト領域 -->
            <div class="notice-info">

                <div class="notice-title-row">
                    <span class="notice-pin"
                          th:if="${notice.pinned}">📌</span>

                    <a class="notice-link"
                       th:href="@{/notice/view/{id}(id=${notice.noticeId})}"
                       th:text="${notice.title}">
                    </a>
                </div>

                <div class="notice-meta">
                    <span th:text="${#temporals.format(notice.createdAt,'yyyy-MM-dd')}"></span>
                    <span class="notice-divider">•</span>
                    閲覧 <span th:text="${notice.views}"></span>
                </div>

            </div>

        </li>

    </ul>

    <!-- 空の場合 -->
    <div class="notice-empty" th:if="${#lists.isEmpty(noticeList)}">
        📭 登録されたお知らせはありません。
    </div>

</div>

</body>
</html>
